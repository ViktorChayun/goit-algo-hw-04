"""
    https://www.edu.goit.global/uk/learn/26850204/19951493/19951578/homework
    
    –∑–∞–≤–¥–∞–Ω–Ω—è:
        * –†–æ–∑—Ä–æ–±—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –≤ —è–∫–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—É –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞  —ñ –≤—ñ–∑—É–∞–ª—ñ–∑—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ü—ñ—î—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –≤–∏–≤–æ–¥—è—á–∏ —ñ–º–µ–Ω–∞ –≤—Å—ñ—Ö –ø—ñ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤. 
        * –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è Python –¥–ª—è —ñ–∑–æ–ª—è—Ü—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø—Ä–æ—î–∫—Ç—É
        * –°–∫—Ä–∏–ø—Ç –º–∞—î –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É.  —à–ª—è—Ö –≤–∫–∞–∑—É—î, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è, —Å—Ç—Ä—É–∫—Ç—É—Ä—É —è–∫–æ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏.
        * –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ colorama –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–ª—å–æ—Ä–æ–≤–æ–≥–æ –≤–∏–≤–µ–¥–µ–Ω–Ω—è.
        * –°–∫—Ä–∏–ø—Ç –º–∞—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —è–∫ —ñ–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π, —Ç–∞–∫ —ñ —ñ–º–µ–Ω–∞ —Ñ–∞–π–ª—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –æ–±—Ö–æ–¥—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π (–º–æ–∂–Ω–∞, –∑–∞ –±–∞–∂–∞–Ω–Ω—è–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –Ω–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–±).
        * –î–ª—è –∫—Ä–∞—â–æ–≥–æ –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è, —ñ–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —Ç–∞ —Ñ–∞–π–ª—ñ–≤ –º–∞—é—Ç—å –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –∑–∞ –∫–æ–ª—å–æ—Ä–æ–º.
        * –ü–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö –Ω–µ —ñ—Å–Ω—É—î –∞–±–æ –≤—ñ–Ω –Ω–µ –≤–µ–¥–µ –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.
"""
import sys
from pathlib import Path
from colorama import Fore

#—Ñ—É–Ω–∫—Ü—ñ—è —â–æ –≤—ñ–¥–º–∞–ª—å–æ–≤—É—î –µ–ª–µ–º–µ–Ω—Ç –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ç–∏–ø—É + –∑–∞–¥–∞–Ω—ñ –ø—Ä–µ—Ñ—ñ–∫—Å–∏
def draw_element(path, folder_prefix, element_prefix):
    icon = "üñºÔ∏è" if path.is_file() else "üìÇ"
    elem_color = Fore.GREEN if path.is_file() else Fore.MAGENTA
    print(f"{Fore.BLUE}{folder_prefix}{element_prefix}{icon} {elem_color}{path.name}{Fore.RESET}")

def draw_folder_tree(path:Path, folder_prefix:str="", element_prefix:str=""):
    draw_element(path, folder_prefix, element_prefix)
    
    #—è–∫—â–æ —Ü–µ —Ñ–∞–π–ª, —Ç–æ –Ω–µ–º–∞—î —Å–µ–Ω—Å—É –¥–∏–≤–∏—Ç–∏—Å—è –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ, –∑—É–ø–∏–Ω–∫–∞ —Ä–µ–∫—É—Ä—Å—ñ—ó
    if path.is_file():
        return
    
    #—Ü–µ –ø–∞–ø–∫–∞, –±—É–¥—É—î–º–æ –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø–∞–ø–∫–∏
    lst = sorted(path.iterdir())
    
    for p in lst:
        # —Ü–µ –æ—Å—Ç–∞–Ω—ñ–π –µ–ª–µ–º–µ–Ω—Ç –ø–∞–ø–∫–∏ —á–∏ –ø—Ä–æ–º—ñ–∂–Ω–∏–π?
        isLast = (p==lst[-1])
        element_prefix = " ‚îó‚îÅ" if isLast else " ‚î£‚îÅ"
        # —è–∫—â–æ —Ü–µ –∫–æ—Ä—ñ–Ω—å (–ø–µ—Ä—à–∏–π –≤–∏–∫–ª–∏–∫) - –¥–æ–¥–∞—î–º–æ –≤—ñ–¥—Å—Ç—É–ø,
        # —ñ–Ω–∞–∫—à–µ —Ü–µ –≤–∂–µ –≤–∫–ª–∞–¥–µ–Ω—ñ –≤ –ø–∞–ø–∫—É –≤–∏–∫–ª–∏–∫–∏, —Å—Ç–≤–∏–º–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—É —Ä–∏—Å–∫—É (–∑ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ)
        ext = " " if folder_prefix == ""  else " ‚îÉ"

        draw_folder_tree(p, folder_prefix + ext, element_prefix)
    
def main():
    if len(sys.argv)==1:
        print(f"{Fore.RED}–ù–µ –∑–∞–¥–∞–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä (—à–ª—è–∂ –¥–æ –ø–∞–ø–∫–∏/—Ñ–∞–π–ª—É)!{Fore.RESET}")
        sys.exit(1) #–ø–æ–º–∏–ª–∫–∞ 1
        
    path_str = sys.argv[1]
    path = Path(path_str)
    
    if not path.exists():
        print(f"{Fore.RED}{path_str} –Ω–µ —ñ—Å–Ω—É—î{Fore.RESET}")
        sys.exit(2) #–ø–æ–º–∏–ª–∫–∞ 2
    
    #print(path)
    draw_folder_tree(path)

# program start
if __name__ =="__main__":
    main()
    sys.exit(0) #—É—Å–ø—ñ—à–Ω–∏–π –≤–∏—Ö—ñ–¥ –∑ –ø—Ä–æ–≥—Ä–∞–º–∏